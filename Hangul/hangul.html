<!DOCTYPE html>

<!--
	Това е демо-шаблон на първото домашно задание по ОКГ.
	Вижте коментарите във файла, за да видите къде да променяте.
	
	Показване/скриване на рамката става с натискане на клавиш
	или с кликване на миши бутон.
-->
	
<html>
	<head>
		<script src="three.min.js"></script>
		<script src="hangul.js"></script>
		<script src="ThreeCSG.js"></script>
	</head>
	
	<body onload="main()">
		<!-- В тага h1 си напишете факултетния номер, групата в Мудъл и двете си имена -->
		<h1></h1>

		<!-- В този script таг напишете кода за създаване на
		думата, изписана на хангъл. Кодът по-долу е примерен.
		Махнете го и сложете вашия код на негово място. -->
		<script>
			//var x_max=40; y_max=20;z_max=10;
			// Елементите, които създавате, ги включвайте в
			// обекта word, създаден наготово в hangul.js.
			// Кодът по-долу прави две плочки на местата на
			// двата глифа от думата.
			
			// Създаваме си материал за елементите - добре е
			// да не е прекалено ярък или тъмен.
			var material = new THREE.MeshPhongMaterial({color:'gray',shininess:100});
			
			/*function ends(x,y,group)
			{
			var left = new THREE.SphereGeometry( 10, 40, 40 );
			left.position.set(x-7,y-7,0);
			var right = new THREE.SphereGeometry( 10, 40, 40 );
			right.position.set(x+5,y+5,0);
			var cutter = new THREE.Mesh( new THREE.BoxGeometry(1,1.5,9), material );
			cutter.position.set(x,y-Math.sqrt(75),0);
			var bspLeft = new ThreeBSP(left);
			var bspRight = new ThreeBSP(right);
			var bspCutter = new ThreeBSP(cutter);
			var bspResult = bspLeft.intersect(bspRight);
			var bspFinal = bsp.Result.intersect(bspCutter);
			var sphereCut = bspFinal.toMesh( material );
			sphereCut.position.set(x,y,0);
			group.add(shereCut);
			}*/
			// Дефинираме елементите на първия глиф
			//Горна част
			var cube1 = new THREE.Mesh( new THREE.BoxGeometry(18,1,9), material );
			cube1.position.set(-10,0.5,0);
			var cube11 = new THREE.Mesh( new THREE.BoxGeometry(1,4,9), material );
			cube11.position.set(-10,2,0);
			var cube12 = new THREE.Mesh( new THREE.BoxGeometry(10,1,9), material );
			cube12.position.set(-10,3.5,0);
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(-14.62,3.38,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(cylinder);
			var cube13 = new THREE.Mesh( new THREE.BoxGeometry(1,6,9), material );
			cube13.position.set(-14.5,6.5,0);
			var cube14 = new THREE.Mesh( new THREE.BoxGeometry(10,1,9), material );
			cube14.position.set(-10,9.5,0);
			
			
			var outer = new THREE.CylinderGeometry( 1.3, 1.3, 9, 80, 80 ,false,0.7,3 );
			var inner = new THREE.CylinderGeometry( 0.5, 0.5, 9, 80, 80, false,0.7,3 );
			var bspOuter = new ThreeBSP(outer);
			var bspInner = new ThreeBSP(inner);
			var bspResult = bspOuter.subtract(bspInner);
			var tube = bspResult.toMesh( material );
			tube.position.set(-15.3,9.2,0);
			tube.rotateX(THREE.Math.degToRad(90));
			word.add(tube);
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(-15.7,9.9,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(cylinder);
			//Пръстен
			var outer = new THREE.CylinderGeometry( 4.5, 4.5, 9, 80, 80 );
			var inner = new THREE.CylinderGeometry( 3.5, 3.5, 9, 80, 80 );
			var bspOuter = new ThreeBSP(outer);
			var bspInner = new ThreeBSP(inner);
			var bspResult = bspOuter.subtract(bspInner);
			var tube = bspResult.toMesh( material );
			tube.position.set(-10,-6,0);
			tube.rotateX(THREE.Math.degToRad(90));
			
			//Нокът над пръстен
			var outer = new THREE.CylinderGeometry( 1.3, 1.3, 9, 80, 80,false,0.5,3 );
			var inner = new THREE.CylinderGeometry( 0.5, 0.5, 9, 80, 80 ,false,0.5,3);
			var bspOuter = new ThreeBSP(outer);
			var bspInner = new ThreeBSP(inner);
			var bspResult = bspOuter.subtract(bspInner);
			var nail = bspResult.toMesh( material );
			nail.position.set(-10,-1.3,0);
			nail.rotateX(THREE.Math.degToRad(90));
			var geometry = new THREE.CylinderGeometry( 0.4, 0.4, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(-10.2,-0.4,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			// Добавяме ги към обекта word (името е фиксирано).
			word.add( cube1, cube11, cube12, cube13, cube14, tube, nail,cylinder);
			
			// Дефинираме елементите на втория глиф
			//Ляво горе
			var cube1 = new THREE.Mesh( new THREE.BoxGeometry(1,7,9), material );
			cube1.position.set(7,1,0);
			var outer = new THREE.CylinderGeometry( 1.5, 1.5, 9, 80, 80,false,0.9,2.5 );
			var inner = new THREE.CylinderGeometry( 0.5, 0.5, 9, 80, 80 ,false,0.9,2.5);
			var bspOuter = new ThreeBSP(outer);
			var bspInner = new ThreeBSP(inner);
			var bspResult = bspOuter.subtract(bspInner);
			var nail = bspResult.toMesh( material );
			nail.position.set(6.1,4.5,0);
			nail.rotateX(THREE.Math.degToRad(90));
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(6,5.5,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(nail,cylinder);
			
			//Ляво долу
			var cube11=new THREE.Mesh( new THREE.BoxGeometry(0.7,5.1,9), material );
			cube11.position.set(9,-1.45,0);
			cube11.rotateZ(THREE.Math.degToRad(-60));
			word.add(cube11);
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(7,-2.53,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(cylinder);
			//cube1.rotation.z = Math.random()-0.5;
			
			
			
			//Средно
			var cube2 = new THREE.Mesh( new THREE.BoxGeometry(1,13,9), material );
			cube2.position.set(15,0,0);
			var cube21 = new THREE.Mesh( new THREE.BoxGeometry(2,1,9), material );
			cube21.position.set(14,2,0);
			var outer = new THREE.CylinderGeometry( 1.5, 1.5, 9, 80, 80,false,0.9,2.5 );
			var inner = new THREE.CylinderGeometry( 0.5, 0.5, 9, 80, 80 ,false,0.9,2.5);
			var bspOuter = new ThreeBSP(outer);
			var bspInner = new ThreeBSP(inner);
			var bspResult = bspOuter.subtract(bspInner);
			var nail = bspResult.toMesh( material );
			nail.position.set(14.1,6.5,0);
			nail.rotateX(THREE.Math.degToRad(90));
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(14,7.5,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(nail,cylinder);
			
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(15,-6.5,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(cylinder);
			//cube2.rotation.z = Math.random()-0.5;
			
			
			
			//Дясно
			var cube3 = new THREE.Mesh( new THREE.BoxGeometry(1,16,9), material );
			cube3.position.set(18,0,0);
			var outer = new THREE.CylinderGeometry( 1.5, 1.5, 9, 80, 80,false,1,2.5 );
			var inner = new THREE.CylinderGeometry( 0.5, 0.5, 9, 80, 80 ,false,1,2.5);
			var bspOuter = new ThreeBSP(outer);
			var bspInner = new ThreeBSP(inner);
			var bspResult = bspOuter.subtract(bspInner);
			var nail = bspResult.toMesh( material );
			nail.position.set(17.05,8,0);
			nail.rotateX(THREE.Math.degToRad(90));
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(16.92,9.01,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(nail,cylinder);
			
			var geometry = new THREE.CylinderGeometry( 0.5, 0.5, 9, 32 );
			var cylinder = new THREE.Mesh( geometry, material );
			cylinder.position.set(18,-8,0)
			cylinder.rotateX(THREE.Math.degToRad(90));
			word.add(cylinder);
			
			//ends(18,16,word);
			//cube3.rotation.z = Math.random()-0.5;
			
			// Добавяме ги към отново към обекта word.
			word.add( cube1, cube2, cube21, cube3);

			// Файлът hangul.js се грижи да нарисува земята,
			// да нарисува обекта word (с каквото пъхнете в
			// него) и да показва/скрива рамката.
			
			// При правенето на глифовете, може да ги правите
			// в някакъв друг мащаб или положение, но накрая
			// с мащабиране и транслация ги направете да са
			// в почти целия обем, определен от рамката.
		</script>
	</body>
</html>